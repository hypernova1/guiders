-- 권한
DROP TABLE IF EXISTS MEMBER_AUTH RESTRICT;

-- 도시
DROP TABLE IF EXISTS CITY RESTRICT;

-- 팔로우
DROP TABLE IF EXISTS FOLLOWER RESTRICT;

-- 멤버
DROP TABLE IF EXISTS MEMBER RESTRICT;

-- 가이더
DROP TABLE IF EXISTS GUIDER RESTRICT;

-- 멘토링
DROP TABLE IF EXISTS MENTORING RESTRICT;

-- 멘토링리뷰
DROP TABLE IF EXISTS MTR_REVIEW RESTRICT;

-- 참여자
DROP TABLE IF EXISTS PARTICIPANTS RESTRICT;

-- 좋아요
DROP TABLE IF EXISTS RECOMMEND RESTRICT;

-- 장소예약
DROP TABLE IF EXISTS RESERVATION RESTRICT;

-- 리뷰
DROP TABLE IF EXISTS REVIEW RESTRICT;

-- 장소리뷰
DROP TABLE IF EXISTS P_REVIEW RESTRICT;

-- 제휴장소
DROP TABLE IF EXISTS PLACE RESTRICT;

-- 에세이
DROP TABLE IF EXISTS ESSAY RESTRICT;

-- 권한
CREATE TABLE MEMBER_AUTH (
	EMAIL VARCHAR(100) NULL, -- 이메일
	AUTH  VARCHAR(20)  NULL  -- 역할
);

-- 도시
CREATE TABLE CITY (
	CTNO  INT          NOT NULL, -- 도시번호
	CNAME VARCHAR(100) NULL      -- 도시명칭
);

-- 도시
ALTER TABLE CITY
	ADD CONSTRAINT CITY_PK -- CITY_PK
		PRIMARY KEY (
			CTNO -- 도시번호
		);

-- 팔로우
CREATE TABLE FOLLOWER (
	FNO     INT          NOT NULL, -- 팔로우번호
	FOLLOW  VARCHAR(100) NULL,     -- 팔로워
	GUIDER  VARCHAR(100) NULL,     -- 가이더
	REGDATE DATE         NULL      -- 맺은날짜
);

-- 팔로우
ALTER TABLE FOLLOWER
	ADD CONSTRAINT FOLLOWER_PK -- FOLLOWER_PK
		PRIMARY KEY (
			FNO -- 팔로우번호
		);

-- 멤버
CREATE TABLE MEMBER (
	EMAIL    VARCHAR(100) NOT NULL, -- 이메일
	PASSWORD VARCHAR(50)  NULL,     -- 비밀번호
	MNAME    VARCHAR(30)  NULL,     -- 이름
	GENDER   INT          NULL,     -- 성별
	PHONE    VARCHAR(20)  NULL,     -- 전화번호
	PHOTO    VARCHAR(100) NULL,     -- 사진경로
	CTNO     INT          NULL,     -- 지역
	REGDATE  DATE         NULL      -- 가입일
);

-- 멤버
ALTER TABLE MEMBER
	ADD CONSTRAINT MEMBER_PK -- MEMBER_PK
		PRIMARY KEY (
			EMAIL -- 이메일
		);

-- 가이더
CREATE TABLE GUIDER (
	EMAIL       VARCHAR(100) NOT NULL, -- 멤버번호
	INTRODUTION TEXT         NOT NULL, -- 경력란
	QUOTE       TEXT         NOT NULL, -- 인용문
	FIELD       VARCHAR(30)  NOT NULL, -- 분야
	LANG        VARCHAR(30)  NOT NULL  -- 언어
);

-- 가이더
ALTER TABLE GUIDER
	ADD CONSTRAINT MENTOR_PK -- MENTOR_PK
		PRIMARY KEY (
			EMAIL -- 멤버번호
		);

-- 멘토링
CREATE TABLE MENTORING (
	MTRNO     INT          NOT NULL, -- 멘토링번호
	MENTORNO  VARCHAR(100) NULL,     -- 가이더번호
	MENTINO   VARCHAR(100) NULL,     -- 팔로워번호
	MTITLE    VARCHAR(100) NULL,     -- 제목
	MCONTENT  LONGTEXT     NULL,     -- 내용
	MREPLY    LONGTEXT     NULL,     -- 답글
	REGDATE   DATE         NULL,     -- 등록일
	REPLYDATE DATE         NULL,     -- 답변일
	LIKECNT   INT          NULL      -- 좋아요개수
);

-- 멘토링
ALTER TABLE MENTORING
	ADD CONSTRAINT MENTORING_PK -- MENTORING_PK
		PRIMARY KEY (
			MTRNO -- 멘토링번호
		);

-- 멘토링리뷰
CREATE TABLE MTR_REVIEW (
	MRNO  INT NOT NULL, -- 리뷰번호
	MTRNO INT NOT NULL  -- 멘토링번호
);

-- 멘토링리뷰
ALTER TABLE MTR_REVIEW
	ADD CONSTRAINT MTRREVIEW_PK -- MTRREVIEW_PK
		PRIMARY KEY (
			MRNO,  -- 리뷰번호
			MTRNO  -- 멘토링번호
		);

-- 참여자
CREATE TABLE PARTICIPANTS (
	RVNO  INT          NOT NULL, -- 예약번호
	EMAIL VARCHAR(100) NOT NULL  -- 참여자
);

-- 참여자
ALTER TABLE PARTICIPANTS
	ADD CONSTRAINT PARTICIPANTS_PK -- PARTICIPANTS_PK
		PRIMARY KEY (
			RVNO,  -- 예약번호
			EMAIL  -- 참여자
		);

-- 좋아요
CREATE TABLE RECOMMEND (
	COL   INT          NOT NULL, -- 에세이번호
	EMAIL VARCHAR(100) NOT NULL  -- 이메일
);

-- 좋아요
ALTER TABLE RECOMMEND
	ADD CONSTRAINT RECOMMEND_PK -- RECOMMEND_PK
		PRIMARY KEY (
			COL,   -- 에세이번호
			EMAIL  -- 이메일
		);

-- 장소예약
CREATE TABLE RESERVATION (
	RVNO      INT          NOT NULL, -- 예약번호
	PNO       INT          NULL,     -- 장소번호
	REMARKS   VARCHAR(200) NULL,     -- 비고
	REGDATE   DATE         NULL,     -- 등록일
	RESERDATE DATE         NULL      -- 예약시간
);

-- 장소예약
ALTER TABLE RESERVATION
	ADD CONSTRAINT RESERVATION_PK -- RESERVATION_PK
		PRIMARY KEY (
			RVNO -- 예약번호
		);

-- 리뷰
CREATE TABLE REVIEW (
	RVNO      INT          NOT NULL, -- 리뷰번호
	EMAIL     VARCHAR(100) NULL,     -- 이메일
	STARCNT   INT          NULL,     -- 별개수
	RVCONTENT VARCHAR(200) NULL,     -- 리뷰내용
	REGDATE   DATE         NULL      -- 등록일
);

-- 리뷰
ALTER TABLE REVIEW
	ADD CONSTRAINT REVIEW_PK -- REVIEW_PK
		PRIMARY KEY (
			RVNO -- 리뷰번호
		);

-- 장소리뷰
CREATE TABLE P_REVIEW (
	RVNO INT NOT NULL, -- 리뷰번호
	PNO  INT NOT NULL  -- 장소번호
);

-- 장소리뷰
ALTER TABLE P_REVIEW
	ADD CONSTRAINT PK_P_REVIEW -- 장소리뷰 기본키
		PRIMARY KEY (
			RVNO, -- 리뷰번호
			PNO   -- 장소번호
		);

-- 제휴장소
CREATE TABLE PLACE (
	PNO     INT          NOT NULL, -- 장소번호
	PNAME   VARCHAR(20)  NULL,     -- 장소이름
	ADDRESS VARCHAR(100) NULL,     -- 주소
	PHONE   VARCHAR(30)  NULL      -- 전화번호
);

-- 제휴장소
ALTER TABLE PLACE
	ADD CONSTRAINT PLACE_PK -- PLACE_PK
		PRIMARY KEY (
			PNO -- 장소번호
		);

-- 에세이
CREATE TABLE ESSAY (
	COL      INT          NOT NULL, -- 에세이번호
	EMAIL    VARCHAR(100) NULL,     -- 이메일
	FIELD    VARCHAR(30)  NULL,     -- 분야
	LANG     VARCHAR(30)  NULL,     -- 언어
	ETITLE   VARCHAR(200) NULL,     -- 제목
	ECONTENT LONGTEXT     NULL,     -- 내용
	LIKECNT  INT          NULL,     -- 좋아요개수
	REGDATE  DATE         NULL      -- 작성일
);

-- 에세이
ALTER TABLE ESSAY
	ADD CONSTRAINT PK_ESSAY -- 에세이 기본키
		PRIMARY KEY (
			COL -- 에세이번호
		);